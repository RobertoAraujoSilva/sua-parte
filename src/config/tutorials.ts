import { TutorialConfig, Tutorial, TutorialPage } from '@/types/tutorial';

/**
 * Tutorial configuration for Sistema Ministerial
 * Contains all tutorial content for each page
 */

// Dashboard tutorials
const dashboardTutorials: Tutorial[] = [
  {
    id: 'dashboard-overview',
    title: 'Vis√£o Geral do Dashboard',
    description: 'Aprenda a navegar pelo painel principal e entenda as funcionalidades b√°sicas',
    page: 'dashboard',
    category: 'basic',
    estimatedTime: 3,
    steps: [
      {
        id: 'welcome',
        title: 'Bem-vindo ao Sistema Ministerial! üëã',
        content: 'Este √© o seu painel de controle principal. Aqui voc√™ pode acessar todas as funcionalidades para gerenciar designa√ß√µes ministeriais de forma inteligente.',
        target: 'h2:contains("Painel de Controle")',
        position: 'bottom'
      },
      {
        id: 'quick-actions',
        title: 'A√ß√µes R√°pidas',
        content: 'Use estes bot√µes para acessar rapidamente as tarefas mais comuns: adicionar estudantes, importar programas e gerar designa√ß√µes.',
        target: '[data-tutorial="quick-actions"]',
        position: 'bottom'
      },
      {
        id: 'navigation-cards',
        title: 'Cart√µes de Navega√ß√£o',
        content: 'Cada cart√£o representa uma se√ß√£o principal do sistema. Clique neles para acessar as funcionalidades espec√≠ficas.',
        target: '[data-tutorial="dashboard-cards"]',
        position: 'top'
      },
      {
        id: 'statistics',
        title: 'Estat√≠sticas do Sistema',
        content: 'Acompanhe o progresso da sua congrega√ß√£o com estat√≠sticas em tempo real sobre estudantes, programas e designa√ß√µes.',
        target: '[data-tutorial="stats-overview"]',
        position: 'top'
      }
    ]
  },
  {
    id: 'dashboard-workflow',
    title: 'Fluxo de Trabalho Recomendado',
    description: 'Entenda a sequ√™ncia ideal para configurar e usar o sistema',
    page: 'dashboard',
    category: 'workflow',
    estimatedTime: 5,
    prerequisites: ['dashboard-overview'],
    steps: [
      {
        id: 'step1-students',
        title: 'Passo 1: Cadastrar Estudantes',
        content: 'Comece cadastrando os estudantes da Escola do Minist√©rio Teocr√°tico. Voc√™ pode adicionar um por vez ou importar uma planilha.',
        target: '[href="/estudantes"]',
        position: 'right',
        action: 'click'
      },
      {
        id: 'step2-programs',
        title: 'Passo 2: Importar Programas',
        content: 'Importe os programas semanais da apostila "Nossa Vida e Minist√©rio Crist√£o" em formato PDF.',
        target: '[href="/programas"]',
        position: 'right',
        action: 'click'
      },
      {
        id: 'step3-assignments',
        title: 'Passo 3: Gerar Designa√ß√µes',
        content: 'Com estudantes e programas cadastrados, voc√™ pode gerar designa√ß√µes autom√°ticas seguindo as regras S-38-T.',
        target: '[href="/designacoes"]',
        position: 'right',
        action: 'click'
      }
    ]
  }
];

// Estudantes tutorials
const estudantesTutorials: Tutorial[] = [
  {
    id: 'students-basic',
    title: 'Gerenciamento de Estudantes',
    description: 'Aprenda a cadastrar, editar e organizar estudantes da escola ministerial',
    page: 'estudantes',
    category: 'basic',
    estimatedTime: 7,
    steps: [
      {
        id: 'page-overview',
        title: 'P√°gina de Estudantes',
        content: 'Esta p√°gina permite gerenciar todos os estudantes da Escola do Minist√©rio Teocr√°tico com valida√ß√£o autom√°tica de qualifica√ß√µes.',
        target: 'h1:contains("Gest√£o de Estudantes")',
        position: 'bottom'
      },
      {
        id: 'tabs-navigation',
        title: 'Navega√ß√£o por Abas',
        content: 'Use as abas para alternar entre: Lista de estudantes, Formul√°rio de cadastro, Importa√ß√£o por planilha e Estat√≠sticas.',
        target: '[data-tutorial="tabs-navigation"]',
        position: 'bottom'
      },
      {
        id: 'add-student',
        title: 'Adicionar Novo Estudante',
        content: 'Clique na aba "Novo Estudante" para cadastrar um estudante individual com todas as informa√ß√µes necess√°rias.',
        target: '[data-value="form"]',
        position: 'bottom',
        action: 'click'
      },
      {
        id: 'student-form',
        title: 'Formul√°rio de Cadastro',
        content: 'Preencha os dados do estudante. O sistema validar√° automaticamente as qualifica√ß√µes baseadas no cargo e g√™nero.',
        target: '[data-tutorial="student-form"]',
        position: 'right'
      },
      {
        id: 'import-option',
        title: 'Importa√ß√£o em Lote',
        content: 'Para cadastrar muitos estudantes de uma vez, use a importa√ß√£o por planilha Excel com detec√ß√£o inteligente de duplicados.',
        target: '[data-value="import"]',
        position: 'bottom',
        action: 'click'
      },
      {
        id: 'filters-search',
        title: 'Filtros e Busca',
        content: 'Use os filtros para encontrar estudantes por cargo, g√™nero, status ou nome. Ideal para congrega√ß√µes grandes.',
        target: '[data-tutorial="filters-section"]',
        position: 'bottom'
      }
    ]
  },
  {
    id: 'students-advanced',
    title: 'Recursos Avan√ßados',
    description: 'Explore funcionalidades avan√ßadas como relacionamentos familiares e qualifica√ß√µes',
    page: 'estudantes',
    category: 'advanced',
    estimatedTime: 5,
    prerequisites: ['students-basic'],
    steps: [
      {
        id: 'family-relationships',
        title: 'Relacionamentos Familiares',
        content: 'Configure relacionamentos familiares para garantir que pares de g√™neros diferentes sejam apenas entre familiares.',
        target: '[data-tutorial="family-field"]',
        position: 'right'
      },
      {
        id: 'qualifications',
        title: 'Sistema de Qualifica√ß√µes',
        content: 'O sistema determina automaticamente quais partes cada estudante pode receber baseado no cargo e regras S-38-T.',
        target: '[data-tutorial="qualifications-badge"]',
        position: 'left'
      },
      {
        id: 'statistics-view',
        title: 'Estat√≠sticas Detalhadas',
        content: 'Visualize estat√≠sticas da congrega√ß√£o: distribui√ß√£o por cargo, g√™nero, idade e participa√ß√£o.',
        target: '[data-value="stats"]',
        position: 'bottom',
        action: 'click'
      }
    ]
  },
  {
    id: 'instructor-dashboard',
    title: 'Painel do Instrutor',
    description: 'Gerencie qualifica√ß√µes e progresso dos estudantes com ferramentas interativas',
    page: 'estudantes',
    category: 'advanced',
    estimatedTime: 8,
    prerequisites: ['students-basic'],
    steps: [
      {
        id: 'instructor-tab',
        title: 'Painel do Instrutor',
        content: 'Acesse o painel interativo do instrutor para gerenciar qualifica√ß√µes e progresso dos estudantes da Escola Ministerial.',
        target: '[data-value="instructor"]',
        position: 'bottom',
        action: 'click'
      },
      {
        id: 'dashboard-stats',
        title: 'Estat√≠sticas do Instrutor',
        content: 'Visualize estat√≠sticas detalhadas sobre progresso, qualifica√ß√µes e distribui√ß√£o dos estudantes.',
        target: '[data-tutorial="instructor-stats"]',
        position: 'bottom'
      },
      {
        id: 'progress-board',
        title: 'Quadro de Progresso',
        content: 'Use o sistema de arrastar e soltar para mover estudantes entre n√≠veis de progresso: Iniciante, Desenvolvimento, Qualificado e Avan√ßado.',
        target: '[data-tutorial="progress-board"]',
        position: 'top'
      },
      {
        id: 'qualification-cards',
        title: 'Cart√µes de Qualifica√ß√£o',
        content: 'Edite as qualifica√ß√µes de cada estudante usando os switches para marcar quais tipos de designa√ß√£o eles podem receber.',
        target: '[data-tutorial="qualification-card"]',
        position: 'right'
      },
      {
        id: 'speech-categories',
        title: 'Categoriza√ß√£o por Designa√ß√£o',
        content: 'Visualize estudantes organizados por tipos de designa√ß√£o S-38-T: Leitura da B√≠blia, Discursos, Demonstra√ß√µes.',
        target: '[data-tutorial="speech-categories"]',
        position: 'top'
      },
      {
        id: 'drag-drop-feature',
        title: 'Arrastar e Soltar',
        content: 'Arraste estudantes entre colunas para atualizar automaticamente seu n√≠vel de progresso e qualifica√ß√µes.',
        target: '[data-tutorial="drag-drop-area"]',
        position: 'center'
      }
    ]
  }
];

// Programas tutorials
const programasTutorials: Tutorial[] = [
  {
    id: 'programs-basic',
    title: 'Gest√£o de Programas',
    description: 'Aprenda a importar e gerenciar programas semanais da apostila',
    page: 'programas',
    category: 'basic',
    estimatedTime: 6,
    steps: [
      {
        id: 'programs-overview',
        title: 'Gest√£o de Programas',
        content: 'Importe e gerencie programas semanais da apostila "Nossa Vida e Minist√©rio Crist√£o" com parsing autom√°tico.',
        target: 'h1:contains("Gest√£o de Programas")',
        position: 'bottom'
      },
      {
        id: 'import-methods',
        title: 'M√©todos de Importa√ß√£o',
        content: 'Voc√™ pode importar programas de duas formas: fazendo upload de PDFs oficiais ou criando manualmente.',
        target: '[data-tutorial="import-section"]',
        position: 'bottom'
      },
      {
        id: 'pdf-upload',
        title: 'Upload de PDF',
        content: 'Arraste e solte ou clique para selecionar arquivos PDF dos programas. O sistema extrair√° automaticamente as partes.',
        target: '[data-tutorial="pdf-upload"]',
        position: 'bottom'
      },
      {
        id: 'manual-creation',
        title: 'Cria√ß√£o Manual',
        content: 'Para casos especiais ou quando o PDF n√£o est√° dispon√≠vel, voc√™ pode criar programas manualmente.',
        target: '[data-tutorial="manual-create"]',
        position: 'bottom'
      },
      {
        id: 'programs-list',
        title: 'Lista de Programas',
        content: 'Visualize todos os programas importados com status, data de importa√ß√£o e partes identificadas.',
        target: '[data-tutorial="programs-list"]',
        position: 'top'
      },
      {
        id: 'program-actions',
        title: 'A√ß√µes do Programa',
        content: 'Para cada programa, voc√™ pode visualizar detalhes, editar informa√ß√µes ou gerar designa√ß√µes autom√°ticas.',
        target: '[data-tutorial="program-actions"]',
        position: 'left'
      }
    ]
  }
];

// Designa√ß√µes tutorials
const designacoesTutorials: Tutorial[] = [
  {
    id: 'assignments-basic',
    title: 'Sistema de Designa√ß√µes Autom√°ticas',
    description: 'Aprenda a gerar designa√ß√µes inteligentes seguindo as regras S-38-T',
    page: 'designacoes',
    category: 'basic',
    estimatedTime: 8,
    prerequisites: ['students-basic', 'programs-basic'],
    steps: [
      {
        id: 'assignments-overview',
        title: 'Designa√ß√µes Autom√°ticas',
        content: 'Gere designa√ß√µes autom√°ticas com algoritmo inteligente que respeita todas as regras da Escola do Minist√©rio Teocr√°tico.',
        target: 'h1:contains("Gest√£o de Designa√ß√µes")',
        position: 'bottom'
      },
      {
        id: 'generate-button',
        title: 'Gerar Designa√ß√µes',
        content: 'Clique neste bot√£o para iniciar o processo de gera√ß√£o autom√°tica de designa√ß√µes para uma semana espec√≠fica.',
        target: '[data-tutorial="generate-assignments"]',
        position: 'bottom',
        action: 'click'
      },
      {
        id: 'week-selection',
        title: 'Sele√ß√£o de Semana',
        content: 'Escolha a semana para a qual deseja gerar designa√ß√µes. O sistema mostrar√° se j√° existem designa√ß√µes para regenera√ß√£o.',
        target: '[data-tutorial="week-selector"]',
        position: 'right'
      },
      {
        id: 'preview-modal',
        title: 'Pr√©via das Designa√ß√µes',
        content: 'Revise as designa√ß√µes geradas antes de confirmar. Voc√™ pode ver estat√≠sticas, valida√ß√µes e regenerar se necess√°rio.',
        target: '[data-tutorial="preview-modal"]',
        position: 'center'
      },
      {
        id: 's38t-rules',
        title: 'Regras S-38-T Aplicadas',
        content: 'O sistema aplica automaticamente: Parte 3 apenas para homens, discursos para qualificados, pares familiares para g√™neros diferentes.',
        target: '[data-tutorial="rules-info"]',
        position: 'left'
      },
      {
        id: 'balancing-system',
        title: 'Sistema de Balanceamento',
        content: 'O algoritmo considera o hist√≥rico das √∫ltimas 8 semanas para distribuir as designa√ß√µes de forma equilibrada.',
        target: '[data-tutorial="balancing-info"]',
        position: 'left'
      },
      {
        id: 'assignments-list',
        title: 'Lista de Designa√ß√µes',
        content: 'Visualize todas as designa√ß√µes por semana com status, data de gera√ß√£o e op√ß√µes para regenerar ou exportar.',
        target: '[data-tutorial="assignments-list"]',
        position: 'top'
      }
    ]
  },
  {
    id: 'assignments-advanced',
    title: 'Recursos Avan√ßados de Designa√ß√µes',
    description: 'Explore funcionalidades avan√ßadas como regenera√ß√£o e relat√≥rios',
    page: 'designacoes',
    category: 'advanced',
    estimatedTime: 5,
    prerequisites: ['assignments-basic'],
    steps: [
      {
        id: 'regeneration',
        title: 'Regenera√ß√£o de Designa√ß√µes',
        content: 'Se n√£o estiver satisfeito com as designa√ß√µes, voc√™ pode regener√°-las. O sistema criar√° uma nova distribui√ß√£o.',
        target: '[data-tutorial="regenerate-button"]',
        position: 'bottom'
      },
      {
        id: 'validation-system',
        title: 'Sistema de Valida√ß√£o',
        content: 'O sistema valida automaticamente conflitos, qualifica√ß√µes inadequadas e relacionamentos familiares.',
        target: '[data-tutorial="validation-tab"]',
        position: 'bottom'
      },
      {
        id: 'export-options',
        title: 'Op√ß√µes de Exporta√ß√£o',
        content: 'Exporte designa√ß√µes para PDF, Excel ou envie por email diretamente para os estudantes.',
        target: '[data-tutorial="export-options"]',
        position: 'left'
      }
    ]
  }
];

// Main configuration object
export const tutorialConfig: TutorialConfig = {
  tutorials: {
    dashboard: dashboardTutorials,
    estudantes: estudantesTutorials,
    programas: programasTutorials,
    designacoes: designacoesTutorials,
    reunioes: [], // To be implemented
    relatorios: [] // To be implemented
  },
  defaultPreferences: {
    autoStart: false,
    showHints: true,
    animationSpeed: 'normal'
  },
  storageKeys: {
    completedTutorials: 'tutorial_completed',
    skippedTutorials: 'tutorial_skipped',
    userPreferences: 'tutorial_preferences'
  }
};

// Helper functions
export function getTutorialById(tutorialId: string): Tutorial | null {
  for (const page of Object.keys(tutorialConfig.tutorials) as TutorialPage[]) {
    const tutorial = tutorialConfig.tutorials[page].find(t => t.id === tutorialId);
    if (tutorial) return tutorial;
  }
  return null;
}

export function getTutorialsForPage(page: TutorialPage): Tutorial[] {
  return tutorialConfig.tutorials[page] || [];
}

export function getBasicTutorials(): Tutorial[] {
  return Object.values(tutorialConfig.tutorials)
    .flat()
    .filter(t => t.category === 'basic');
}

export function getAdvancedTutorials(): Tutorial[] {
  return Object.values(tutorialConfig.tutorials)
    .flat()
    .filter(t => t.category === 'advanced');
}

export function getWorkflowTutorials(): Tutorial[] {
  return Object.values(tutorialConfig.tutorials)
    .flat()
    .filter(t => t.category === 'workflow');
}
